(window.webpackJsonpfontend=window.webpackJsonpfontend||[]).push([[0],{127:function(e,t,a){},179:function(e,t,a){e.exports=a(277)},184:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,s,u=a(0),m=a.n(u),d=a(9),p=a.n(d),h=(a(184),a(20)),v=a(22),f=a(24),E=a(23),b=a(25),y=a(175),g=a(47),O=(a(72),a(127),a(280)),j=a(166),w=a(169),C=a(285),S=a(284),k=a(283),D=a(10),P=a.n(D),N=a(54),A=a(55),x=(a(186),a(56)),F=new(n=function e(){Object(h.a)(this,e),Object(N.a)(this,"newEvent",r,this),Object(N.a)(this,"editEvent",i,this),Object(N.a)(this,"baseApi",l,this),Object(N.a)(this,"update_date",c,this),Object(N.a)(this,"update_event",o,this),Object(N.a)(this,"remove_event",s,this)},r=Object(A.a)(n.prototype,"newEvent",[x.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{expire_date:""}}}),i=Object(A.a)(n.prototype,"editEvent",[x.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=Object(A.a)(n.prototype,"baseApi",[x.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"http://127.0.0.1:8000/api"}}),c=Object(A.a)(n.prototype,"update_date",[x.a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.newEvent.expire_date=t}}}),o=Object(A.a)(n.prototype,"update_event",[x.a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.editEvent=t}}}),s=Object(A.a)(n.prototype,"remove_event",[x.a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.editEvent=null}}}),n),R=k.a.RangePicker,_=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={mode:["date","date"],value:[]},a.handlePanelChange=function(e,t){a.setState({value:e,mode:["date"===t[0]?"month":t[0],"date"===t[1]?"month":t[1]]})},a.handleChange=function(e){a.setState({value:e}),e[1]&&F.update_date(e[1].format())},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=new Date;this.setState({value:[P()(e,"YYYY-MM-DD"),null]})}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.mode;return m.a.createElement(R,{placeholder:["Start date","End date"],format:"YYYY-MM-DD",value:t,mode:a,onChange:this.handleChange,onPanelChange:this.handlePanelChange})}}]),t}(m.a.Component),z=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={event:{title:"",detail:"",priority:"",expire_date:""}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){F.editEvent&&this.setState({event:F.editEvent})}},{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(S.a,null,m.a.createElement(S.a.Group,null,m.a.createElement(S.a.Label,{column:""},"Title"),m.a.createElement(S.a.Control,{defaultValue:this.state.event.title,type:"txt",placeholder:"Enter title",ref:this.props.refs[0]})),m.a.createElement(S.a.Group,null,m.a.createElement(S.a.Label,{column:""},"Detail"),m.a.createElement(S.a.Control,{defaultValue:this.state.event.detail,as:"textarea",rows:"2",ref:this.props.refs[1],placeholder:"Enter detail"})),m.a.createElement(S.a.Group,{md:"2"},m.a.createElement(S.a.Label,{column:""},"Priority"),m.a.createElement(S.a.Control,{defaultValue:this.state.event.priority,as:"select",ref:this.props.refs[2]},m.a.createElement("option",null,"P1"),m.a.createElement("option",null,"P2"),m.a.createElement("option",null,"P3"),m.a.createElement("option",null,"P4")),m.a.createElement(S.a.Text,{className:"text-muted"},"P4 means the most urgent issue.")),m.a.createElement(S.a.Group,null,m.a.createElement(_,null))))}}]),t}(m.a.Component),M=a(167),Y=a.n(M),H=a(168),I=a.n(H),T={get provider(){return Y.a.create({withCredentials:!0,headers:{"X-CSRFToken":I.a.load("csrftoken")}})},getInstance:function(){return this.provider},request:function(){var e;return(e=this.provider).request.apply(e,arguments)},post:function(){var e;return(e=this.provider).post.apply(e,arguments)},get:function(){var e;return(e=this.provider).get.apply(e,arguments)},patch:function(){var e;return(e=this.provider).patch.apply(e,arguments)},delete:function(){var e;return(e=this.provider).delete.apply(e,arguments)},put:function(){var e;return(e=this.provider).put.apply(e,arguments)}},B=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1},a.FormRefs=["title","detail","priority"].map((function(e){return m.a.createRef()})),a.submitForms=function(){a.handleClose();var e={title:a.FormRefs[0].current.value,detail:a.FormRefs[1].current.value,priority:Number(a.FormRefs[2].current.value.slice(1,2)),expire_time:F.newEvent.expire_date.slice(0,-6),is_done:!1};T.post("".concat(F.baseApi,"/"),e).then((function(e){alert("New Event Created!!"),window.location.reload()}))},a.handleClose=function(){a.setState({show:!1})},a.handleShow=function(){a.setState({show:!0})},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,{className:"header"},m.a.createElement(j.a,{md:{span:4,offset:1},className:"align-center"},m.a.createElement("h2",{className:"title"},"TodoList")),m.a.createElement(j.a,{md:{span:2,offset:5},className:"align-center"},m.a.createElement(w.a,{className:"button",variant:"light",onClick:this.handleShow},"+")),m.a.createElement(C.a,{show:this.state.show,onHide:this.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},m.a.createElement(C.a.Header,{closeButton:!0},m.a.createElement(C.a.Title,null,"Add new event")),m.a.createElement(C.a.Body,null,m.a.createElement(z,{refs:this.FormRefs})),m.a.createElement(C.a.Footer,null,m.a.createElement(w.a,{variant:"secondary",onClick:this.handleClose},"Close"),m.a.createElement(w.a,{variant:"primary",onClick:this.submitForms},"Submit")))))}}]),t}(m.a.Component),q=a(287),K=a(27),G=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,null,m.a.createElement(j.a,{md:{span:11,offset:1}},m.a.createElement(q.a,{defaultActiveKey:"Ongoing",variant:"flush"},m.a.createElement(q.a.Item,{action:!0,eventKey:"Ongoing",className:"eliminate-focus",onClick:function(){e.props.changeDisplay("Ongoing")}},m.a.createElement(O.a,null,m.a.createElement(j.a,{md:{span:4}},m.a.createElement(K.a,{type:"calendar"})),m.a.createElement(j.a,{md:{span:8}},"Ongoing"))),m.a.createElement(q.a.Item,{action:!0,eventKey:"History",className:"eliminate-focus",onClick:function(){e.props.changeDisplay("History")}},m.a.createElement(O.a,null,m.a.createElement(j.a,{md:{span:4}},m.a.createElement(K.a,{type:"carry-out"})),m.a.createElement(j.a,{md:{span:8}},"History")))))))}}]),t}(m.a.Component),L=a(291),V=a(171),J=a(281),U=a(286),X=a(288),Q=a(290),W=a(282);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(V.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={event:{}},a.getBadges=function(){var e=a.state.event.priority;if(e){e>4?e=4:e<=0&&(e=1);var t=[{},{var:"success",name:"P1"},{var:"primary",name:"P2"},{var:"warning",name:"P3"},{var:"danger",name:"P4"}];return m.a.createElement(J.a,{variant:t[e].var},m.a.createElement("span",{className:"sub-title"},t[e].name))}return null},a.TriggerEditDetail=function(){F.update_event(a.state.event),a.props.EditDetail(a.state.event.id)},a.DeleteEvent=function(){T.delete("".concat(F.baseApi,"/").concat(a.state.event.id,"/")).then((function(e){alert("Event Deleted!"),a.setState({event:null})}))},a.EditPriority=function(e){if(1===e){var t={priority:a.state.event.priority+1};T.patch("".concat(F.baseApi,"/").concat(a.state.event.id,"/"),t).then((function(e){a.setState({event:$({},a.state.event,{priority:a.state.event.priority+1})})}))}else{var n={priority:a.state.event.priority-1};T.patch("".concat(F.baseApi,"/").concat(a.state.event.id,"/"),n).then((function(e){a.setState({event:$({},a.state.event,{priority:a.state.event.priority-1})})}))}},a.EditDone=function(){T.patch("".concat(F.baseApi,"/").concat(a.state.event.id,"/"),{is_done:!0}).then((function(e){alert("Mark resolved!"),a.setState({event:null})}))},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.setState({event:this.props.event})}},{key:"render",value:function(){return this.state.event?m.a.createElement(O.a,{className:"padding-left padding-top"},m.a.createElement(j.a,null,m.a.createElement(U.a,{onClose:this.DeleteEvent,className:"eliminate-focus event-width"},m.a.createElement(U.a.Header,null,this.getBadges(),m.a.createElement("strong",{className:"mr-auto padding-left"},this.state.event.title),m.a.createElement("small",null,P()(this.state.event.expire_time).format("YYYY/MM/DD"))),m.a.createElement(U.a.Body,{className:"bottom-zero"},m.a.createElement(O.a,null,m.a.createElement(j.a,{className:"detail-height"},this.state.event.detail)),m.a.createElement(O.a,null,m.a.createElement(j.a,{className:"padding-zero"},m.a.createElement(X.a,null,m.a.createElement(Q.a,null,m.a.createElement(Q.a.Header,{className:"padding-zero"},m.a.createElement(X.a.Toggle,{as:w.a,variant:"link",eventKey:"0"},m.a.createElement("span",null,"Edit!"))),m.a.createElement(X.a.Collapse,{eventKey:"0"},m.a.createElement(Q.a.Body,{className:"card-padding"},m.a.createElement(O.a,null,m.a.createElement(j.a,null,m.a.createElement(W.a,null,m.a.createElement(w.a,{variant:"dark",size:"sm",onClick:this.TriggerEditDetail},"Edit content"),m.a.createElement(w.a,{variant:"dark",size:"sm",onClick:this.EditPriority.bind(this,1)},"Add priority"),m.a.createElement(w.a,{variant:"dark",size:"sm",onClick:this.EditPriority.bind(this,0)},"Reduce priority"),m.a.createElement(w.a,{variant:"dark",size:"sm",onClick:this.EditDone},"Mark resolved!")))))))))))))):m.a.createElement(O.a,{className:"padding-left padding-top"})}}]),t}(m.a.Component),te=a(289),ae=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement(te.a,null,m.a.createElement(te.a.Toggle,{variant:"success",id:"dropdown-basic"},"Sorted by"),m.a.createElement(te.a.Menu,null,m.a.createElement(te.a.Item,{onClick:this.props.handleSort.bind(this,"Priority")},"Priority"),m.a.createElement(te.a.Item,{onClick:this.props.handleSort.bind(this,"Expire Date")},"Expire Date")))}}]),t}(m.a.Component),ne=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={current:"",show:!1,editId:"",active:1,prePage:"",nextPage:"",count:0,events:[]},a.FormRefs=["title","detail","priority"].map((function(e){return m.a.createRef()})),a.RequestEvents=function(e){T.get(e).then((function(e){a.setState({current:a.props.current,events:e.data.results,prePage:e.data.previous,nextPage:e.data.next,count:e.data.count})}))},a.EditDetail=function(e){a.setState({editId:e}),a.handleShow()},a.submitForms=function(){a.handleClose();var e={title:a.FormRefs[0].current.value,detail:a.FormRefs[1].current.value,priority:Number(a.FormRefs[2].current.value.slice(1,2)),expire_time:F.newEvent.expire_date.slice(0,-6),is_done:!1};T.put("".concat(F.baseApi,"/").concat(a.state.editId,"/"),e).then((function(e){alert("put new data!"),window.location.reload()}))},a.handleClose=function(){a.setState({show:!1})},a.handleShow=function(){a.setState({show:!0})},a.handlePag=function(e){a.setState({active:e});var t="";t=1!==e?a.state.nextPage.slice(0,-1)+e:"".concat(F.baseApi,"/"),a.RequestEvents(t)},a.handleSorted=function(e){a.setState({current:"Sorted by "+e})},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;"History"===this.state.current?(console.log(5),T.get("".concat(F.baseApi,"/history/")).then((function(t){e.setState({current:e.state.current,events:t.data})}))):"Sorted by Priority"===this.state.current?(console.log(6),T.get("".concat(F.baseApi,"/priority/")).then((function(t){e.setState({current:e.state.current,events:t.data})}))):"Sorted by Expire Date"===this.state.current?(console.log(7),T.get("".concat(F.baseApi,"/expire/")).then((function(t){e.setState({current:e.state.current,events:t.data})}))):(console.log(8),this.RequestEvents("".concat(F.baseApi,"/")))}},{key:"shouldComponentUpdate",value:function(e,t,a){var n=this;return console.log(e,t,a),t.current!==this.state.current?"Sorted by Priority"===t.current?(console.log(3),T.get("".concat(F.baseApi,"/priority/")).then((function(e){n.setState({current:t.current,events:e.data})}))):"Sorted by Expire Date"===t.current&&(console.log(4),T.get("".concat(F.baseApi,"/expire/")).then((function(e){n.setState({current:t.current,events:e.data})}))):e.current!==this.state.current&&("History"===e.current?(console.log(1),T.get("".concat(F.baseApi,"/history/")).then((function(t){n.setState({current:e.current,events:t.data})}))):"Ongoing"===e.current&&(console.log(2),this.RequestEvents("".concat(F.baseApi,"/")))),!0}},{key:"render",value:function(){var e=this,t=this.state.events.map((function(t,a){return m.a.createElement(ee,{event:t,key:t.id,EditDetail:e.EditDetail})})),a=[],n=0;n=this.state.count%5===0?this.state.count/5:this.state.count/5+1;for(var r=1;r<=n;r++)a.push(m.a.createElement(L.a.Item,{key:r,active:r===this.state.active,onClick:this.handlePag.bind(this,r)},r));return m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,{className:"padding-left padding-top"},m.a.createElement(j.a,null,m.a.createElement("h2",null,this.state.current))),m.a.createElement(O.a,{className:"padding-left padding-top"},m.a.createElement(j.a,{md:{span:4}},m.a.createElement("h5",null,"Events")),m.a.createElement(j.a,{md:{span:4,offset:4}},m.a.createElement(ae,{handleSort:this.handleSorted}))),t,"Ongoing"===this.state.current?m.a.createElement(O.a,{className:"padding-top"},m.a.createElement(j.a,{className:"align-center"},m.a.createElement(L.a,{size:"sm"},a))):m.a.createElement(O.a,{className:"padding-top"}),m.a.createElement(C.a,{show:this.state.show,onHide:this.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},m.a.createElement(C.a.Header,{closeButton:!0},m.a.createElement(C.a.Title,null,"Edit event")),m.a.createElement(C.a.Body,null,m.a.createElement(z,{refs:this.FormRefs})),m.a.createElement(C.a.Footer,null,m.a.createElement(w.a,{variant:"secondary",onClick:this.handleClose},"Close"),m.a.createElement(w.a,{variant:"primary",onClick:this.submitForms},"Submit"))))}}]),t}(m.a.Component),re=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={current:"Ongoing"},a.changeDisplay=function(e){a.setState({current:e})},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(O.a,null,m.a.createElement(j.a,null,m.a.createElement(B,null))),m.a.createElement(O.a,null,m.a.createElement(j.a,{md:{span:3},className:"nav-color padding-top"},m.a.createElement(G,{changeDisplay:this.changeDisplay})),m.a.createElement(j.a,{md:{span:6},className:"padding-top"},m.a.createElement(ne,{current:this.state.current})),m.a.createElement(j.a,{md:{span:3},className:"nav-color padding-top"})))}}]),t}(m.a.Component),ie=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement(y.a,null,m.a.createElement(g.c,null,m.a.createElement(g.a,{path:"/",component:re})))}}]),t}(m.a.Component);a(275),a(276);p.a.render(m.a.createElement(ie,null),document.getElementById("root"))},72:function(e,t,a){}},[[179,1,2]]]);
//# sourceMappingURL=main.f44d4b2c.chunk.js.map